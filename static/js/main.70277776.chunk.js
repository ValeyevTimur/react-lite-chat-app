(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{213:function(e,t,s){},224:function(e,t,s){},225:function(e,t,s){},226:function(e,t,s){},404:function(e,t,s){"use strict";s.r(t);var c=s(0),a=s.n(c),n=s(189),i=s.n(n),r=s(31),o=(s(213),s(208).a.connect("http://localhost:5000")),j=s(134),l=s.n(j),u=s(94),d=s(193),m=s(93),b=(s(222),s.p+"static/media/emoji.97585af2.svg"),h=s(2),O=function(e){var t=e.addEmoji,s=Object(c.useState)(!1),n=Object(r.a)(s,2),i=n[0],o=n[1],j=a.a.useRef(),l=function(e){(e.path||e.composedPath&&e.composedPath()).includes(j.current)||(console.log("test"),o(!1))};return a.a.useEffect((function(){document.body.addEventListener("click",l)}),[]),Object(h.jsxs)("div",{className:"emoji-list",ref:j,title:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043c\u0430\u0439\u043b",onClick:function(){o(!i)},children:[Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:b,alt:"emoji-svg"})}),i&&Object(h.jsx)("div",{children:Object(h.jsx)(m.b,{onSelect:function(e){return t(e)}})})]})},x=(s(224),function(e){var t=e.currentMessage,s=e.setCurrentMessage,c=e.sendMessage;return Object(h.jsx)("textarea",{className:"chat-input",type:"text",value:t,onChange:function(e){return s(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&c()}})}),f=(s(225),function(e){var t=e.blob,s=e.fileName,a=e.userName,n=e.message,i=Object(c.useState)(""),o=Object(r.a)(i,2),j=o[0],l=o[1];return Object(c.useEffect)((function(){var e=new FileReader;e.readAsDataURL(t),e.onloadend=function(){l(e.result)}}),[t]),Object(h.jsxs)("div",{className:"image",children:[Object(h.jsx)("img",{src:j,alt:s}),Object(h.jsx)("div",{className:a===n.author?"message-text__me":"message-text author"})]})}),g=(s(226),s(194)),v=s.n(g),p=s.p+"static/media/send.9e4379d8.svg",N=s.p+"static/media/file.c116d3d6.svg",y=s(207),w=function(e){var t=e.socket,s=e.userName,a=e.room,n=Object(c.useState)(""),i=Object(r.a)(n,2),o=i[0],j=i[1],b=Object(c.useState)([]),g=Object(r.a)(b,2),w=g[0],k=g[1],S=Object(c.useState)(),C=Object(r.a)(S,2),M=C[0],D=C[1],E=function(){var e=Object(d.a)(l.a.mark((function e(){var c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M){e.next=8;break}c={room:a,author:s,type:"file",body:M,mimeType:M.type,fileName:M.name,time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()},D(),t.emit("send_message",c),k((function(e){return[].concat(Object(u.a)(e),[c])})),j(""),e.next=14;break;case 8:if(""===o){e.next=14;break}return n={room:a,author:s,body:o,time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()},e.next=12,t.emit("send_message",n);case 12:k((function(e){return[].concat(Object(u.a)(e),[n])})),j("");case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e){j(e.target.files[0].name),D(e.target.files[0])};Object(c.useEffect)((function(){t.on("recieve_message",(function(e){console.log(e),k((function(t){return[].concat(Object(u.a)(t),[e])}))}))}),[t]);return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("div",{className:"header",children:Object(h.jsx)("div",{className:"chat-header",children:"ReactJS Lite Chat"})}),Object(h.jsx)("div",{className:"main",children:Object(h.jsx)("div",{className:"chat",children:Object(h.jsx)(y.a,{className:"messages",children:Object(h.jsx)("div",{children:w.map((function(e,t){if("file"===e.type){var c=new Blob([e.body]);return Object(h.jsx)("div",{className:s===e.author?"message me":"message",children:Object(h.jsx)(f,{fileName:e.fileName,blob:c,userName:e.author,message:e})},t)}return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:s===e.author?"message me":"message",children:Object(h.jsxs)("div",{className:"message-content",children:[Object(h.jsx)("div",{className:s===e.author?"message-bubble isMe":"message-bubble",children:Object(h.jsx)("div",{className:"message-text ",children:v()(e.body,/:(.+?):/g,(function(e,t){return Object(h.jsx)(m.a,{emoji:e,set:"apple",size:22},t)}))})}),Object(h.jsx)("div",{className:s===e.author?"message-text__me":"message-text author",children:Object(h.jsxs)("div",{className:"description",children:[Object(h.jsx)("p",{children:e.author}),Object(h.jsxs)("p",{children:[" ",e.time]})]})})]})})})}))})})})}),Object(h.jsx)("div",{className:"footer",children:Object(h.jsxs)("div",{className:"chat-actions",children:[Object(h.jsxs)("div",{className:"actions-left",children:[Object(h.jsxs)("div",{className:"send-file",title:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",children:[Object(h.jsx)("label",{htmlFor:"choose-file",className:"chous",children:Object(h.jsx)("img",{src:N,alt:"file-svg"})}),Object(h.jsx)("input",{className:"input-file",id:"choose-file",onChange:F,type:"file"})]}),Object(h.jsx)(O,{chooseFile:F,addEmoji:function(e){var t=e.native;j((o+" "+t).trim())}})]}),Object(h.jsx)(x,{currentMessage:o,setCurrentMessage:j,sendMessage:E}),Object(h.jsx)("div",{className:"send-btn",onClick:E,title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",children:Object(h.jsx)("img",{src:p,alt:"send-svg"})})]})})]})};var k=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(""),i=Object(r.a)(n,2),j=i[0],l=i[1],u=Object(c.useState)(!1),d=Object(r.a)(u,2),m=d[0],b=d[1];return Object(h.jsx)(h.Fragment,{children:m?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w,{socket:o,userName:s,room:j})}):Object(h.jsx)("div",{className:"wrapper",children:Object(h.jsxs)("form",{className:"enter-chat",children:[Object(h.jsx)("h3",{children:"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0447\u0430\u0442"}),Object(h.jsx)("label",{htmlFor:"username",children:"\u0418\u043c\u044f"}),Object(h.jsx)("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",onChange:function(e){return a(e.target.value)},id:"username"}),Object(h.jsx)("label",{htmlFor:"room",children:"\u041a\u043e\u043c\u043d\u0430\u0442\u0430"}),Object(h.jsx)("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043c\u043d\u0430\u0442\u0443",onChange:function(e){return l(e.target.value)},id:"room"}),Object(h.jsx)("button",{onClick:function(){""!==s&&""!==j?(o.emit("enter_room",j),b(!0)):alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f/\u043a\u043e\u043c\u043d\u0430\u0442\u0443")},children:"\u0412\u043e\u0439\u0442\u0438"})]})})})};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(k,{})}),document.getElementById("root"))}},[[404,1,2]]]);
//# sourceMappingURL=main.70277776.chunk.js.map